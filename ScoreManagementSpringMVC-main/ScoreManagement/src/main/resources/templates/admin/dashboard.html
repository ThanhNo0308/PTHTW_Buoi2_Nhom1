<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bảng điều khiển Quản trị | Hệ thống quản lý điểm</title>
    <th:block th:replace="base :: styles"></th:block>
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
</head>
<body>
    <div th:replace="base :: header"></div>

    <div class="container-fluid py-4">
        <div class="dashboard-header fade-in-up" data-aos="fade-up">
            <div class="row align-items-center">
                <div class="col-md-7">
                    <h1 class="h3 mb-0">Bảng điều khiển quản trị</h1>
                    <p class="lead text-white-50 mb-0">
                        Xem tổng quan về hệ thống quản lý điểm sinh viên của bạn
                    </p>
                </div>
                <div class="col-md-5 d-flex justify-content-end">
                    <div class="welcome-message">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <p class="mb-0 text-white-50">Xin chào,</p>
                            <h4 class="mb-0 text-white" th:text="${#authentication.name}">Admin</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alerts -->
        <div class="alert alert-success alert-dismissible fade show" th:if="${successMessage}" data-aos="fade-down">
            <div class="d-flex align-items-center">
                <i class="fas fa-check-circle me-2 fa-lg"></i>
                <span th:text="${successMessage}"></span>
                <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="row">
            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="stats-card text-white bg-gradient-primary">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <p class="stats-label">Sinh viên</p>
                        <h2 class="stats-count" th:text="${studentCount}">0</h2>

                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/students}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="stats-card text-white bg-gradient-success">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <p class="stats-label">Giảng viên</p>
                        <h2 class="stats-count" th:text="${teacherCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/teachers}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                <div class="stats-card text-white bg-gradient-info">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-school"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-school"></i>
                        </div>
                        <p class="stats-label">Lớp học</p>
                        <h2 class="stats-count" th:text="${classCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/classes}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
                <div class="stats-card text-white bg-gradient-warning">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <p class="stats-label">Ngành học</p>
                        <h2 class="stats-count" th:text="${majorCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/majors}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="500">
                <div class="stats-card text-white bg-gradient-danger">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <p class="stats-label">Khoa</p>
                        <h2 class="stats-count" th:text="${departmentCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/departments}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="600">
                <div class="stats-card text-white bg-gradient-purple">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <p class="stats-label">Đăng ký học</p>
                        <h2 class="stats-count" th:text="${enrollmentCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/enrollment}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="700">
                <div class="stats-card text-white bg-gradient-teal">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-award"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <p class="stats-label">Loại đào tạo</p>
                        <h2 class="stats-count" th:text="${trainingTypeCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/training-types}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="800">
                <div class="stats-card text-white bg-gradient-orange">
                    <div class="card-body">
                        <div class="icon-bg">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stats-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <p class="stats-label">Tài khoản</p>
                        <h2 class="stats-count" th:text="${accountCount}">0</h2>
                    </div>
                    <div class="card-footer d-flex align-items-center justify-content-between">
                        <a class="text-white small stretched-link" th:href="@{/admin/accounts}">Xem chi tiết</a>
                        <div class="small text-white">
                            <i class="fas fa-angle-right"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- Community & Quick Access -->
        <div class="row">
            <div class="col-12 mb-4" sec:authorize="hasAuthority('Admin')" data-aos="fade-up">
                <div class="forum-card shadow pulse">
                    <div class="card-body d-flex align-items-center">
                        <div class="forum-icon">
                            <i class="fas fa-comments fa-2x text-primary"></i>
                        </div>
                        <div class="flex-grow-1 px-3">
                            <h4 class="mb-1 font-weight-bold">Diễn đàn trao đổi học tập</h4>
                            <p class="text-muted mb-0">Không gian trao đổi học tập, giải đáp thắc mắc giữa giảng viên và sinh viên.</p>
                        </div>
                        <a th:href="@{/admin/forum}" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt me-2"></i> Truy cập diễn đàn
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin tools -->
        <div class="row">
            <div class="col-lg-6 mb-4" data-aos="fade-up">
                <div class="card feature-card shadow h-100">
                    <div class="card-header">
                        <h6 class="m-0 font-weight-bold"><i class="fas fa-cogs"></i> Quản lý hệ thống</h6>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                             <a th:href="@{/admin/send-notification}" class="list-group-item list-group-item-action">
                                <i class="fas fa-bell"></i> Gửi thông báo cho sinh viên
                            </a>
                            <a th:href="@{/admin/enrollment}" class="list-group-item list-group-item-action">
                                <i class="far fa-registered"></i> Quản lý đăng ký học
                            </a>
                            <a th:href="@{/admin/school-years}" class="list-group-item list-group-item-action">
                                <i class="fas fa-calendar-alt"></i> Quản lý năm học
                            </a>
                            <a th:href="@{/admin/subjects}" class="list-group-item list-group-item-action">
                                <i class="fas fa-book"></i> Quản lý môn học
                            </a>
                            <a th:href="@{/admin/accounts}" class="list-group-item list-group-item-action">
                                <i class="fas fa-users-cog"></i> Quản lý tài khoản
                            </a>
                            <a th:href="@{/admin/subjTeach}" class="list-group-item list-group-item-action">
                                <i class="fas fa-chalkboard-teacher"></i> Phân công giảng dạy
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="card feature-card shadow h-100">
                    <div class="card-header">
                        <h6 class="m-0 font-weight-bold"><i class="fas fa-graduation-cap"></i> Quản lý đào tạo</h6>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                            <a th:href="@{/admin/training-types}" class="list-group-item list-group-item-action">
                                <i class="fas fa-place-of-worship"></i> Quản lý loại đào tạo
                            </a>
                            <a th:href="@{/admin/departments}" class="list-group-item list-group-item-action">
                                <i class="fas fa-globe"></i> Quản lý khoa
                            </a>
                            <a th:href="@{/admin/majors}" class="list-group-item list-group-item-action">
                                <i class="fas fa-university"></i> Quản lý ngành học
                            </a>
                            <a th:href="@{/admin/classes}" class="list-group-item list-group-item-action">
                                <i class="fas fa-users"></i> Quản lý lớp học
                            </a>
                            <a th:href="@{/admin/students}" class="list-group-item list-group-item-action">
                                <i class="fas fa-user-graduate"></i> Quản lý sinh viên
                            </a>
                            <a th:href="@{/admin/teachers}" class="list-group-item list-group-item-action">
                                <i class="fas fa-chalkboard-teacher"></i> Quản lý giảng viên
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="base :: footer"></div>
    <div th:replace="base :: scripts"></div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

    <script>
        // Khởi tạo thư viện animation
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
    </script>
</body>
</html>